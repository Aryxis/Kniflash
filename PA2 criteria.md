# PA2 评分细则

PA2 满分 100 分。按点给分。评分细则中各项扣/加分不超过该项总分。未实现的功能扣全部分数。

按照验收顺序排序。

## 阶段一（35 分）

### 地图（15 分）

1. 窗口大小（2 分）。
   - 虽然在手册中明确规定了窗口的大小，但这是为了后面解释地图相对窗口的大小创造便利。只要窗口的大小不至于过小，就可以算完成任务，此项一般不扣分。
2. 地图与窗口的相对大小（2 分）。
   - 只要地图比窗口大即可给分。此项一般不扣分。
3. 地图不可穿越（4 分）。
   - 只要角色不能越过地图边界即可给分。不要求角色可以贴着边界行走。
   - 验收时出现卡墙等 Bug，扣 1 分。
   - 角色的活动范围明显和地图显示区域不符，扣 1 分。
4. 引导元素（2 分）。
   - 只要有图案即可给分。此项一般不扣分。
5. 树丛（5 分）
   - 树丛要在地图上随机生成。如果生成位置固定，扣 1 分。
   - 在地图范围内的树丛数量 ≥ 2。如果 < 2，扣 1 分。允许树丛出现在边界之外。
   - 树丛要能正确遮挡角色本身。如果不能正确遮挡，扣 1 分。

### 角色（7 分）

1. 站立和行走（2 分）
   - 两种状态下的动画效果相同，扣 2 分。
2. 移动（2 分）
   - 角色不能连续移动（即和示例代码的移动行为相同），扣 2 分。
   - 玩家的移动会影响人机的移动（叠加，说明没使用子项），或玩家的移动导致道具移动，扣 2 分。
3. 死亡动画（3 分）
   - 没有扣 3 分。

### 飞刀（7 分）

1. 初始角色有 4 个飞刀（1 分）。如果有，但不是 4 个，只要显示正常就不扣分。
2. 飞刀正常地增加和减少（2 分）。
3. 飞刀在数量 < 4 时，会自动增加（1 分）。
4. 随着飞刀数量增加/减少，攻击范围变大/变小（3 分）。

### 道具（6 分）

1. 生成
   - 开局场上要有一定数量的道具，没有扣 1 分。
   - 随着游戏进行道具要随机生成，不生成扣 2 分。
   - 角色拾取道具后，道具不消失，扣 1 分。
2. 特殊道具
   - 疾步之靴道具需要有状态标识，并能在状态结束之后移除标识。没有标识扣 2 分，不能正常移除标识扣 1 分。
   - 如果学生采取其他设计，比如能量条等，也可以不用移除标识，逻辑自洽即可。

### GUI（0 分）

阶段一对 GUI 不做要求。如果在展示时出现 Bug，则按照上述的对应项目扣分。

## 阶段二（30 分）

1. 索敌（3 分）

   - 没有索敌特效或特效不明显，扣 1 分。
   - 锁定的敌人不是距离最近的单位，扣 1 分。
2. 远程攻击（8 分）

   - 没有飞刀抛出的动画，扣 2 分。
   - 命中单位后飞刀未消失，扣 1 分。
   - 投出飞刀后，攻击方飞刀数未减少，扣 1 分。
   - 命中后，被攻击方还有飞刀，飞刀数未减少，扣 1 分。
   - 命中后，被攻击方生命值未减少，扣 1 分。
   - 出现其他明显 Bug（比如飞刀数为 0 还能远程攻击）酌情扣分。
3. 近身攻击（6 分）

   - 飞刀每秒抵消数量没有上限，扣 2 分。

   - 出现其他明显 Bug（比如新生成的飞刀不能立即抵消攻击）酌情扣分。
4. 电脑（8 分）

   - 初始地图的人机数量 < 5，扣 1 分。
   - 电脑角色卡在边界上，扣 1 分。
   - 电脑的移动出现 Bug，扣 1 分。
   - 电脑不能捡起道具，扣 1 分。
   - 电脑不能向单位扔出飞刀，扣 3 分。
5. 结束画面（5 分）

   - 不能正确显示结束画面（闪退等），扣 2 分。
     - 注：这里只要求显示结束画面即可，不要求关闭结束画面之后的行为。
     - 如果关闭结束画面后游戏直接退出，记得看一下 console 中的退出码是不是 0。
   - 计分板的角色排名、击杀数量、存活时间各占 1 分。
   - 出现其他明显 Bug 酌情扣分。

## 阶段三（10 分）

### GUI（5 分）

1. 游戏开始界面（2 分）
   - 必须有开始游戏”和“退出游戏”两个按钮，少一个扣 1 分。
2. 游戏结束界面（3 分）
   - 必须有“返回”按钮，否则扣 1 分。
   - 必须能够返回初始界面，并进行下一轮游戏。否则扣 1 分。

### 单位受击效果（5 分）

评分标准

1. 0 分：完全没有受击效果。
2. 3 分：实现了受击效果，但是演示时出现明显 Bug（比如血条乱飘）。
3. 5 分：图形闪烁、出现数字、血条等实现均可。

## 文档（10 分）

- 文件树（2 分），各文件夹的解释（2 分）。
- 类和辅助函数的解释（6 分）。
  - 考核流程：随机抽查两个核心类，要求学生对照代码解释文档内容，并回答针对文档的提问。
  - 评分标准：
    - 6 分：完全按照要求书写，文档与代码严格对应，能清晰阐述设计动机。
      - 只要能流畅地说明即可，有部分无伤大雅的遗漏不扣分（比如漏了一个只有 `return` 的 getter 方法）。
    - 5 分：存在非关键性缺陷，出现 1-2 处文档与代码不同步，出现 1 次无法回答针对文档的提问。
      - 场景：“工厂函数”这个词出现在文档中，但是不知道“工厂函数”是什么。
    - 3 分：出现理解缺陷，对核心机制解释错误。或出现 2 次及以上无法回答针对文档的提问。
      - 场景：学生出现 “这个类我也不知道为什么要存在” 的表述；混淆渲染与计算逻辑。
    - 0 分：文档杂乱无章，毫无逻辑。或未体现对关键（和游戏相关的）逻辑的说明。或存在明显抄袭痕迹。
      - 场景：讲解时只照着文档念，无法输出有效信息。
  - 在学生讲解时，可以顺便进行代码风格检查。

## 代码风格（5 分）

- OOP（3 分）：自创类 2 分，继承 1 分。
- 注释（2 分）：代码中只要有一些关键性的注释即可给分。如果实在找不到注释，但学生在文档检查阶段能流利地讲解，扣 1 分，否则扣 2 分。
- 代码实在混乱，各处风格不一，没有让人阅读的欲望。直接从总分中扣 5 分。

### 阶段四（10 分）

如果学生完成的是手册列出的小项，则按照手册给分。如果学生实现了其他的扩展功能，请根据功能的工作量给分（推荐按照工作量将这个功能对应到手册列出的功能，然后根据手册给分）。

## 代码健壮性

验收时游戏崩溃，可以重启。崩溃一次扣 3 分。最多扣 15 分。

